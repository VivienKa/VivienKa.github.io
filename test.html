<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Toddler Sound Tiles</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      background: #000;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }
    .grid {
      display: grid;
      width: 100%;
      height: 100%;
      gap: 10px;
    }
    .tile {
      background: #222;
      border-radius: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.2s;
    }
    .tile:active { transform: scale(0.95); }
    .tile img {
      width: 80%;
      height: 80%;
      object-fit: contain;
    }
    #fullscreen-btn {
      position: fixed;
      top: 10px;
      right: 10px;
      background: #ff4081;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 18px;
      border-radius: 10px;
      cursor: pointer;
      z-index: 1000;
    }
    #home-btn {
      position: fixed;
      top: 10px;
      left: 10px;
      background: #4CAF50;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 18px;
      border-radius: 10px;
      cursor: pointer;
      z-index: 1000;
    }
  </style>
</head>
<body>
  <button id="fullscreen-btn">Fullscreen</button>
  <button id="home-btn">üè† Home</button>
  <div class="grid" id="grid"></div>

  <script>
    const grid = document.getElementById('grid');
    let audioPlayer;

    function clearGrid(cols, rows) {
      grid.innerHTML = "";
      grid.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
      grid.style.gridTemplateRows = `repeat(${rows}, 1fr)`;
    }

    function playSoundFile(url) {
      if (audioPlayer) { audioPlayer.pause(); audioPlayer.remove(); }
      audioPlayer = new Audio(url);
      audioPlayer.play();
    }

    function playTone(freq, duration = 500) {
      if (audioPlayer) audioPlayer.pause();
      const ctx = new (window.AudioContext || window.webkitAudioContext)();
      const osc = ctx.createOscillator();
      osc.type = 'sine';
      osc.frequency.value = freq;
      osc.connect(ctx.destination);
      osc.start();
      osc.stop(ctx.currentTime + duration / 1000);
    }

    // --- PAGES ---
    function showStartPage() {
      clearGrid(3, 1);
      const tiles = [
        { img: 'speaker.png', action: showSoundPage },
        { img: 'dog.png', action: showAnimalPage },
        { img: 'musical-notes.png', action: showMusicPage }
      ];
      tiles.forEach(tile => {
        const div = document.createElement('div');
        div.className = 'tile';
        div.innerHTML = `<img src="${tile.img}">`;
        div.addEventListener('click', tile.action);
        grid.appendChild(div);
      });
    }

    function showSoundPage() {
      clearGrid(2, 4);
      for (let i = 1; i <= 8; i++) {
        const div = document.createElement('div');
        div.className = 'tile';
        div.style.background = '#444';
        div.innerHTML = `<span style="color:white;font-size:3em;">${i}</span>`;
        div.addEventListener('click', () => playSoundFile(`sound${i}.wav`));
        grid.appendChild(div);
      }
    }

    function showAnimalPage() {
      clearGrid(2, 4);
      const tiles = [
        { img: 'pig.png', url: 'pig.wav' },
        { img: 'goose.png', url: 'goose.wav' },
        { img: 'dog.png', url: 'dog.wav' },
        { img: 'horse.png', url: 'horse.wav' },
        { img: 'cow.png', url: 'cow.wav' },
        { img: 'cat.png', url: 'cat.wav' },
        { img: 'sheep.png', url: 'sheep.wav' },
        { img: 'duck.png', url: 'duck.wav' }
      ];
      tiles.forEach(tile => {
        const div = document.createElement('div');
        div.className = 'tile';
        div.innerHTML = `<img src="${tile.img}">`;
        div.addEventListener('click', () => playSoundFile(tile.url));
        grid.appendChild(div);
      });
    }

    function showMusicPage() {
      clearGrid(2, 4);
      const freqs = [261.6, 293.7, 329.6, 349.2, 392.0, 440.0, 493.9, 523.2];
      const colors = ['#ff9999','#ffcc99','#ffff99','#ccff99','#99ffcc','#99ccff','#cc99ff','#ff99cc'];
      freqs.forEach((freq, i) => {
        const div = document.createElement('div');
        div.className = 'tile';
        div.style.background = colors[i];
        div.innerHTML = `<span style="font-size:2em;color:black;">${i+1}</span>`;
        div.addEventListener('click', () => playTone(freq));
        grid.appendChild(div);
      });
    }

    // --- Init ---
    showStartPage();

    // Fullscreen toggle
    document.getElementById('fullscreen-btn').addEventListener('click', () => {
      const elem = document.documentElement;
      if (elem.requestFullscreen) elem.requestFullscreen();
      else if (elem.webkitRequestFullscreen) elem.webkitRequestFullscreen();
      else if (elem.msRequestFullscreen) elem.msRequestFullscreen();
    });

    // Home button
    document.getElementById('home-btn').addEventListener('click', () => {
      showStartPage();
    });

    // Force fullscreen re-entry
    document.addEventListener('fullscreenchange', () => {
      if (!document.fullscreenElement) {
        setTimeout(() => document.documentElement.requestFullscreen(), 500);
      }
    });
  </script>
</body>
</html>
